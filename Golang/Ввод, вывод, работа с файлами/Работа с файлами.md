
### База
**os** - основной пакет для работы файлами

#### API - работы с файлами

| Действие                          | Функция            | Комментарий                                                                                                        |     |
| --------------------------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------ | --- |
| Создание файла                    | os.Create()        | Создает файл с правми на запись и чтение.Если он существует, перезаписывает его. Возвращает объект файла и ошибку. |     |
| Закрытие файла                    | file.Close()       |                                                                                                                    |     |
| Запись в файл слайса байт         | file.Write()       |                                                                                                                    |     |
| Запись в файл строки              | file.WriteString() |                                                                                                                    |     |
| Чтение всего содержимого из файла | os.ReadFile()      | Прочитать все и сразу (для ленивых и эффективных). если файл большой  - можно поймать **Out of memory**            |     |
| Чтение файла в буфер по частям    | file.Read()        | Подходит для больших файлов                                                                                        |     |
| Получение информации по файлу     | os.Stat()          | Можно проверить файл на существование и другое                                                                     |     |
| Открыть/создать файл              | os.OpenFile        | дает тебе полный контроль по открытию и созданию файлов                                                            |     |
| Удалить файл/директорию           | os.Remove()        |                                                                                                                    |     |

#### флаги открытия файлов для os.OpenFile
- Флаги предоставляют возможность определенных манипуляций по открытому файлу
- Флаги (можно комбинировать через `|`):
	- `os.O_RDONLY`: только чтение
	- `os.O_WRONLY`: только запись
	- `os.O_RDWR`: чтение и запись
	- `os.O_APPEND`: дозапись в конец файла
	- `os.O_CREATE`: создать файл, если его нет
	- `os.O_TRUNC`: обрезать (очистить) файл при открытии

#### Права доступа к файлу
- этот параметр имеет значение ТОЛЬКО ТОГДА, когда файл СОЗДАЕТСЯ. т.е. используется флаг `os.O_CREATE` и файла еще не существует, `os.OpenFile` создаст его и применит указанные тобой права. 
- Если же файл уже существует, этот третий параметр будет вежливо проигнорирован, и права доступа у файла останутся прежними.
- Записывается в **восьмеричном** формате (с `0` впереди).
- Код состоит из трех цифр: **[Владелец][Группа][Остальные]**.
- Каждая цифра — это сумма прав: **Чтение (4) + Запись (2) + Исполнение (1)**.
- **`0644`** — стандарт для данных (Владелец `rw-`, все остальные `r--`).
- **`0755`** — стандарт для исполняемых файлов и папок (Владелец `rwx`, все остальные `r-x`).

[[]]

### Примеры

#### os.ReadFile - применение
```go
package main

import (
	"fmt"
	"os"
)

func main() {
	// os.ReadFile - это швейцарский нож для чтения небольших файлов.
	// Он сам открывает, читает всё содержимое в виде слайса байт и закрывает файл.
	data, err := os.ReadFile("my_super_secret_notes.txt")
	if err != nil {
		fmt.Println("Не могу прочитать секретные записки:", err)
		return
	}

	// data - это []byte, конвертируем в строку для вывода
	fmt.Println("Содержимое файла:")
	fmt.Println(string(data))
}
```


#### os.OpenFile - применение
```go
package main

import (
    "fmt"
    "os"
    "time"
)

func main() {
    // Открываем файл с флагом дозаписи. Если его нет - создаем.
    logFile, err := os.OpenFile("app.log", os.O_APPEND|os.O_CREATE|os.O_WRONLY, 0666)
    if err != nil {
        fmt.Println("Не удалось открыть лог-файл:", err)
        return
    }
    defer logFile.Close()

    logMessage := fmt.Sprintf("%s: Произошло важное событие!\n", time.Now().Format(time.RFC3339))

    _, err = logFile.WriteString(logMessage)
    if err != nil {
        fmt.Println("Не удалось записать в лог:", err)
    }
	fmt.Println("Запись в лог добавлена.")
}
```

#### os.Stat() - применение
```go
package main  
  
import (  
    "fmt"  
    "os")  
  
func main() {  
  
    file, _ := os.OpenFile("my_super_secret_notes.txt", os.O_RDWR|os.O_CREATE, 0666)  
    file.WriteString("hello world")  
  
    defer file.Close()  
  
    fileInfo, err := os.Stat("my_super_secret_notes.txt")  
    if err != nil {  
       if os.IsNotExist(err) {  
          fmt.Println("Файл не существует! Секретов нет.")  
       } else {  
          fmt.Println("Какая-то другая ошибка:", err)  
       }  
       return  
    }  
  
    fmt.Println("Файл существует!")  
    fmt.Printf("Имя файла: %s\n", fileInfo.Name())  
    fmt.Printf("Размер: %d байт\n", fileInfo.Size())  
    fmt.Printf("Права доступа: %s\n", fileInfo.Mode())  
    fmt.Printf("Это директория? %t\n", fileInfo.IsDir())  
  
    fmt.Printf("%+v", fileInfo)  
}
```
